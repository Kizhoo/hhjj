<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#7c3aed">
  <title>To-Kizhoo â€¢ Kirim Pesan Anonim</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ===== VARIABLES ===== */
    :root {
      --primary: #7c3aed;
      --primary-dark: #5b21b6;
      --primary-light: #8b5cf6;
      --secondary: #06b6d4;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --dark: #0f172a;
      --dark-light: #1e293b;
      --light: #f8fafc;
      --gray: #64748b;
      --gray-light: #94a3b8;
      --radius: 12px;
      --radius-lg: 20px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.2);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* ===== RESET & BASE ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: var(--light);
      min-height: 100vh;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ===== ANIMATED BACKGROUND ===== */
    .background-animation {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -2;
      overflow: hidden;
    }

    .gradient-circle {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.3;
      animation: float 20s infinite linear;
    }

    .circle-1 {
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, var(--primary), transparent);
      top: -100px;
      left: -100px;
      animation-delay: 0s;
    }

    .circle-2 {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, var(--secondary), transparent);
      top: 50%;
      right: -100px;
      animation-delay: -5s;
      animation-duration: 25s;
    }

    .circle-3 {
      width: 350px;
      height: 350px;
      background: radial-gradient(circle, #db2777, transparent);
      bottom: -100px;
      left: 20%;
      animation-delay: -10s;
      animation-duration: 30s;
    }

    @keyframes float {
      0%, 100% {
        transform: translate(0, 0) rotate(0deg);
      }
      25% {
        transform: translate(40px, 60px) rotate(90deg);
      }
      50% {
        transform: translate(0, 120px) rotate(180deg);
      }
      75% {
        transform: translate(-40px, 60px) rotate(270deg);
      }
    }

    /* ===== MAIN CONTAINER ===== */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 1;
    }

    /* ===== HEADER ===== */
    .header {
      text-align: center;
      padding: 40px 20px;
      animation: fadeInDown 0.8s ease-out;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 15px;
    }

    .logo-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: white;
      box-shadow: var(--shadow-lg);
    }

    .logo-text h1 {
      font-size: 3rem;
      font-weight: 800;
      background: linear-gradient(135deg, #f0abfc, #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      line-height: 1;
    }

    .logo-text p {
      color: var(--gray-light);
      font-size: 0.9rem;
      margin-top: 5px;
    }

    .tagline {
      font-size: 1.1rem;
      color: var(--gray-light);
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /* ===== MAIN GRID ===== */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 30px;
      animation: fadeInUp 0.8s ease-out 0.2s both;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ===== FORM CARD ===== */
    .form-card {
      background: rgba(30, 41, 59, 0.8);
      backdrop-filter: blur(20px);
      border-radius: var(--radius-lg);
      padding: 40px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: var(--shadow-lg);
    }

    .card-header {
      margin-bottom: 35px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 20px;
    }

    .card-header h2 {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--light);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .card-header h2 i {
      color: var(--primary-light);
    }

    .card-subtitle {
      color: var(--gray-light);
      font-size: 0.95rem;
      margin-top: 8px;
    }

    /* ===== FORM ELEMENTS ===== */
    .form-group {
      margin-bottom: 25px;
    }

    .form-label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      color: var(--light);
      margin-bottom: 12px;
      font-size: 1rem;
    }

    .form-label i {
      color: var(--primary-light);
    }

    .optional {
      font-size: 0.85rem;
      color: var(--gray-light);
      font-weight: 400;
      margin-left: 8px;
    }

    /* ===== INPUTS ===== */
    input, textarea {
      width: 100%;
      padding: 16px 20px;
      background: rgba(15, 23, 42, 0.7);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      color: var(--light);
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      transition: var(--transition);
    }

    textarea {
      min-height: 180px;
      resize: vertical;
      line-height: 1.6;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.2);
      background: rgba(15, 23, 42, 0.9);
    }

    input::placeholder, textarea::placeholder {
      color: var(--gray);
    }

    .input-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
    }

    .char-count {
      font-size: 0.85rem;
      color: var(--gray-light);
    }

    .char-count.warning {
      color: var(--warning);
    }

    .char-count.error {
      color: var(--danger);
    }

    .input-note {
      font-size: 0.85rem;
      color: var(--gray-light);
    }

    /* ===== UPLOAD AREA ===== */
    .upload-area {
      border: 3px dashed rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      background: rgba(15, 23, 42, 0.3);
      position: relative;
      overflow: hidden;
    }

    .upload-area:hover {
      border-color: var(--primary);
      background: rgba(124, 58, 237, 0.05);
      transform: translateY(-2px);
    }

    .upload-area.drag-over {
      border-color: var(--success);
      background: rgba(16, 185, 129, 0.05);
    }

    .upload-icon {
      font-size: 48px;
      color: var(--primary);
      margin-bottom: 20px;
      opacity: 0.8;
    }

    .upload-text {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--light);
    }

    .browse-btn {
      color: var(--primary);
      font-weight: 600;
      text-decoration: underline;
      cursor: pointer;
      margin: 0 5px;
    }

    .upload-hint {
      color: var(--gray-light);
      font-size: 0.9rem;
      margin-top: 8px;
    }

    .file-input {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      opacity: 0;
      cursor: pointer;
    }

    /* ===== PREVIEW ===== */
    .preview-container {
      margin-top: 25px;
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .preview-container.show {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .preview-header h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--light);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .clear-all {
      background: rgba(239, 68, 68, 0.2);
      color: #f87171;
      border: 1px solid rgba(239, 68, 68, 0.3);
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: var(--transition);
    }

    .clear-all:hover {
      background: rgba(239, 68, 68, 0.3);
      transform: translateY(-2px);
    }

    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
    }

    .preview-item {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      height: 120px;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .preview-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    }

    .preview-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .preview-item .remove {
      position: absolute;
      top: 8px;
      right: 8px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .preview-item .remove:hover {
      background: var(--danger);
      transform: scale(1.1);
    }

    /* ===== SEND BUTTON ===== */
    .send-btn {
      width: 100%;
      padding: 20px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      transition: var(--transition);
      margin-top: 30px;
      box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
    }

    .send-btn:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(124, 58, 237, 0.4);
    }

    .send-btn:active {
      transform: translateY(-1px);
    }

    .send-btn:disabled {
      background: var(--gray);
      cursor: not-allowed;
      opacity: 0.7;
      transform: none !important;
      box-shadow: none !important;
    }

    .send-note {
      text-align: center;
      margin-top: 15px;
      color: var(--gray-light);
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    /* ===== INFO CARD ===== */
    .info-card {
      background: rgba(30, 41, 59, 0.8);
      backdrop-filter: blur(20px);
      border-radius: var(--radius-lg);
      padding: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: var(--shadow-lg);
      height: fit-content;
      animation: fadeInUp 0.8s ease-out 0.4s both;
    }

    .info-card h3 {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 25px;
      color: var(--light);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .info-card h3 i {
      color: var(--primary-light);
    }

    .info-list {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .info-item {
      display: flex;
      gap: 15px;
      align-items: flex-start;
    }

    .info-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.1rem;
      flex-shrink: 0;
    }

    .info-content h4 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 5px;
      color: var(--light);
    }

    .info-content p {
      font-size: 0.9rem;
      color: var(--gray-light);
      line-height: 1.5;
    }

    .info-tip {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.2);
      border-radius: 10px;
      padding: 20px;
      margin-top: 25px;
    }

    .info-tip h4 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--warning);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .info-tip p {
      font-size: 0.9rem;
      color: var(--gray-light);
      line-height: 1.5;
    }

    /* ===== MODALS & OVERLAYS ===== */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(10px);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }

    .overlay.show {
      opacity: 1;
      visibility: visible;
    }

    /* Loading Overlay */
    .loading-content {
      background: rgba(30, 41, 59, 0.95);
      border-radius: var(--radius-lg);
      padding: 50px;
      text-align: center;
      max-width: 500px;
      width: 90%;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: var(--shadow-lg);
      animation: scaleIn 0.5s ease;
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .loading-spinner {
      width: 80px;
      height: 80px;
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 30px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-content h3 {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--light);
    }

    .loading-content p {
      color: var(--gray-light);
      font-size: 1rem;
      margin-bottom: 30px;
    }

    .loading-steps {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .loading-step {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      transition: var(--transition);
    }

    .loading-step.active {
      background: rgba(124, 58, 237, 0.1);
      border-left: 4px solid var(--primary);
    }

    .step-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      color: var(--gray-light);
    }

    .loading-step.active .step-icon {
      background: var(--primary);
      color: white;
    }

    .step-text h4 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 5px;
      color: var(--light);
    }

    .loading-step.active .step-text h4 {
      color: var(--primary);
    }

    .step-text p {
      font-size: 0.9rem;
      color: var(--gray-light);
    }

    /* Success Modal */
    .success-content {
      background: rgba(30, 41, 59, 0.95);
      border-radius: var(--radius-lg);
      padding: 60px 40px;
      text-align: center;
      max-width: 500px;
      width: 90%;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: var(--shadow-lg);
      animation: scaleIn 0.5s ease;
    }

    .success-icon {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, var(--success), #34d399);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      color: white;
      margin: 0 auto 30px;
      box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
    }

    .success-content h3 {
      font-size: 2.2rem;
      font-weight: 800;
      margin-bottom: 20px;
      color: var(--light);
    }

    .success-content p {
      color: var(--gray-light);
      font-size: 1.1rem;
      line-height: 1.6;
      margin-bottom: 40px;
    }

    .modal-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    .modal-btn {
      padding: 15px 30px;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: var(--transition);
      border: none;
      min-width: 150px;
    }

    .modal-btn.primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
    }

    .modal-btn.primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(124, 58, 237, 0.3);
    }

    .modal-btn.secondary {
      background: rgba(255, 255, 255, 0.1);
      color: var(--light);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .modal-btn.secondary:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-3px);
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: rgba(30, 41, 59, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 20px 25px;
      min-width: 300px;
      max-width: 90%;
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 1001;
      opacity: 0;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .toast-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .toast.success .toast-icon {
      background: rgba(16, 185, 129, 0.2);
      color: var(--success);
    }

    .toast.error .toast-icon {
      background: rgba(239, 68, 68, 0.2);
      color: var(--danger);
    }

    .toast.warning .toast-icon {
      background: rgba(245, 158, 11, 0.2);
      color: var(--warning);
    }

    .toast.info .toast-icon {
      background: rgba(59, 130, 246, 0.2);
      color: #3b82f6;
    }

    .toast-content {
      flex: 1;
    }

    .toast-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--light);
    }

    .toast-message {
      font-size: 0.9rem;
      color: var(--gray-light);
      line-height: 1.4;
    }

    .toast-close {
      background: transparent;
      border: none;
      color: var(--gray-light);
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .toast-close:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--light);
    }

    /* ===== ERROR DISPLAY ===== */
    .error-display {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1));
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 12px;
      padding: 25px;
      margin-top: 25px;
      display: none;
      animation: slideDown 0.5s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .error-display.show {
      display: block;
    }

    .error-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 15px;
    }

    .error-header i {
      color: var(--danger);
      font-size: 1.2rem;
    }

    .error-header h4 {
      font-size: 1.1rem;
      font-weight: 600;
      color: #f87171;
    }

    .error-message {
      color: #fca5a5;
      font-size: 0.95rem;
      line-height: 1.5;
      margin-bottom: 15px;
    }

    .error-solution {
      background: rgba(0, 0, 0, 0.2);
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
    }

    .error-solution h5 {
      font-size: 0.9rem;
      font-weight: 600;
      color: #fca5a5;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .error-solution p {
      color: #fecaca;
      font-size: 0.85rem;
      line-height: 1.4;
    }

    /* ===== FOOTER ===== */
    .footer {
      text-align: center;
      padding: 40px 20px 20px;
      margin-top: 60px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--gray-light);
      font-size: 0.9rem;
    }

    .footer-heart {
      color: var(--danger);
      margin: 0 5px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 20px;
    }

    .footer-link {
      color: var(--gray-light);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: var(--transition);
    }

    .footer-link:hover {
      color: var(--primary);
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 992px) {
      .main-grid {
        grid-template-columns: 1fr;
      }
      
      .info-card {
        order: -1;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      .logo-text h1 {
        font-size: 2.2rem;
      }
      
      .form-card {
        padding: 25px;
      }
      
      .preview-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      }
      
      .modal-buttons {
        flex-direction: column;
      }
      
      .modal-btn {
        width: 100%;
      }
      
      .footer-links {
        flex-direction: column;
        gap: 15px;
        align-items: center;
      }
    }

    @media (max-width: 480px) {
      .header {
        padding: 30px 10px;
      }
      
      .logo {
        flex-direction: column;
        text-align: center;
      }
      
      .logo-icon {
        width: 50px;
        height: 50px;
        font-size: 24px;
      }
      
      .form-card {
        padding: 20px;
      }
      
      .upload-area {
        padding: 30px 15px;
      }
      
      .loading-content,
      .success-content {
        padding: 30px 20px;
      }
    }

    /* ===== UTILITIES ===== */
    .hidden {
      display: none !important;
    }

    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }

    .shake {
      animation: shake 0.5s ease;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
  </style>
</head>

<body>
  <!-- Animated Background -->
  <div class="background-animation">
    <div class="gradient-circle circle-1"></div>
    <div class="gradient-circle circle-2"></div>
    <div class="gradient-circle circle-3"></div>
  </div>

  <!-- Main Container -->
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <div class="logo-icon">
          <i class="fas fa-paper-plane"></i>
        </div>
        <div class="logo-text">
          <h1>To-Kizhoo</h1>
          <p>Kirim pesan anonim ke Kizhoo</p>
        </div>
      </div>
      <p class="tagline">
        Sampaikan pesan, saran, atau apapun yang ingin kamu katakan secara anonim kepada Kizhoo melalui Telegram.
        Pesan akan langsung dikirim ke akun Telegram Kizhoo.
      </p>
    </header>

    <!-- Main Content Grid -->
    <div class="main-grid">
      <!-- Form Card -->
      <div class="form-card">
        <div class="card-header">
          <h2><i class="fas fa-edit"></i> Form Pesan</h2>
          <p class="card-subtitle">Isi formulir di bawah untuk mengirim pesan ke Kizhoo</p>
        </div>

        <!-- Sender Name -->
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-user"></i> Nama Kamu
          </label>
          <input type="text" id="senderName" placeholder="Masukkan nama atau samaran">
          <div class="input-info">
            <span class="input-note">Nama akan ditampilkan di pesan Telegram</span>
          </div>
        </div>

        <!-- Message -->
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-comment-dots"></i> Pesan Kamu
          </label>
          <textarea id="message" placeholder="Tulis pesan yang ingin disampaikan..."></textarea>
          <div class="input-info">
            <span class="char-count" id="charCount">0/2000 karakter</span>
            <span class="input-note">Pesan akan dikirim sebagai teks di Telegram</span>
          </div>
        </div>

        <!-- Photos -->
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-images"></i> Foto/Gambar
            <span class="optional">(Opsional)</span>
          </label>
          
          <div class="upload-area" id="uploadArea">
            <i class="fas fa-cloud-upload-alt upload-icon"></i>
            <p class="upload-text">
              Seret & lepas gambar di sini atau <span class="browse-btn">klik untuk memilih</span>
            </p>
            <p class="upload-hint">
              Maksimal 5 gambar â€¢ 5MB per file â€¢ Format: JPG, PNG, GIF
            </p>
            <input type="file" id="photoInput" class="file-input" multiple accept="image/*">
          </div>
          
          <div class="preview-container" id="previewContainer">
            <div class="preview-header">
              <h4><i class="fas fa-images"></i> Gambar Terpilih</h4>
              <button class="clear-all" id="clearAllBtn">
                <i class="fas fa-trash"></i> Hapus Semua
              </button>
            </div>
            <div class="preview-grid" id="previewGrid"></div>
          </div>
        </div>

        <!-- Send Button -->
        <button class="send-btn" id="sendBtn">
          <i class="fas fa-paper-plane"></i> Kirim ke Kizhoo
        </button>
        
        <p class="send-note">
          <i class="fas fa-lock"></i> Pesan akan dikirim secara aman dan anonim
        </p>

        <!-- Error Display -->
        <div class="error-display" id="errorDisplay">
          <div class="error-header">
            <i class="fas fa-exclamation-triangle"></i>
            <h4>Gagal Mengirim Pesan</h4>
          </div>
          <div class="error-message" id="errorMessage"></div>
          <div class="error-solution">
            <h5><i class="fas fa-lightbulb"></i> Solusi:</h5>
            <p id="errorSolution">Cek koneksi internet Anda dan coba lagi beberapa saat</p>
          </div>
        </div>
      </div>

      <!-- Info Card -->
      <div class="info-card">
        <h3><i class="fas fa-info-circle"></i> Info & Tips</h3>
        
        <div class="info-list">
          <div class="info-item">
            <div class="info-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="info-content">
              <h4>100% Anonim</h4>
              <p>Nama dan data Anda tidak akan disimpan. Pesan langsung dikirim ke Telegram Kizhoo.</p>
            </div>
          </div>
          
          <div class="info-item">
            <div class="info-icon">
              <i class="fas fa-bolt"></i>
            </div>
            <div class="info-content">
              <h4>Real-time Delivery</h4>
              <p>Pesan akan langsung masuk ke Telegram Kizhoo dalam hitungan detik setelah dikirim.</p>
            </div>
          </div>
          
          <div class="info-item">
            <div class="info-icon">
              <i class="fas fa-image"></i>
            </div>
            <div class="info-content">
              <h4>Support Gambar</h4>
              <p>Bisa kirim foto atau screenshot. Maksimal 5 gambar dengan ukuran 5MB per file.</p>
            </div>
          </div>
          
          <div class="info-item">
            <div class="info-icon">
              <i class="fas fa-history"></i>
            </div>
            <div class="info-content">
              <h4>Tidak Ada Riwayat</h4>
              <p>Setelah dikirim, pesan tidak bisa dilihat kembali atau dihapus. Pastikan sudah benar.</p>
            </div>
          </div>
        </div>
        
        <div class="info-tip">
          <h4><i class="fas fa-lightbulb"></i> Tips Menulis Pesan</h4>
          <p>Sampaikan pesan dengan jelas dan sopan. Gunakan nama samaran jika ingin tetap anonim.</p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>Made with <i class="fas fa-heart footer-heart"></i> for Kizhoo â€¢ To-Kizhoo v3.0</p>
      <div class="footer-links">
        <a href="#" class="footer-link" id="privacyBtn">
          <i class="fas fa-lock"></i> Privasi
        </a>
        <a href="#" class="footer-link" id="howToBtn">
          <i class="fas fa-question-circle"></i> Cara Kerja
        </a>
        <a href="https://t.me/kizhoo" target="_blank" class="footer-link">
          <i class="fab fa-telegram"></i> Telegram Kizhoo
        </a>
      </div>
    </footer>
  </div>

  <!-- Loading Overlay -->
  <div class="overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <h3>Mengirim Pesan...</h3>
      <p>Pesan Anda sedang dikirim ke Telegram Kizhoo</p>
      
      <div class="loading-steps">
        <div class="loading-step active" id="step1">
          <div class="step-icon">
            <i class="fas fa-check"></i>
          </div>
          <div class="step-text">
            <h4>Validasi Data</h4>
            <p>Memvalidasi pesan dan gambar</p>
          </div>
        </div>
        
        <div class="loading-step" id="step2">
          <div class="step-icon">
            <i class="fas fa-upload"></i>
          </div>
          <div class="step-text">
            <h4>Mengunggah</h4>
            <p>Mengunggah gambar ke server</p>
          </div>
        </div>
        
        <div class="loading-step" id="step3">
          <div class="step-icon">
            <i class="fas fa-paper-plane"></i>
          </div>
          <div class="step-text">
            <h4>Mengirim ke Telegram</h4>
            <p>Mengirim pesan ke akun Kizhoo</p>
          </div>
        </div>
        
        <div class="loading-step" id="step4">
          <div class="step-icon">
            <i class="fas fa-check-double"></i>
          </div>
          <div class="step-text">
            <h4>Selesai</h4>
            <p>Pesan berhasil dikirim</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="overlay" id="successModal">
    <div class="success-content">
      <div class="success-icon">
        <i class="fas fa-check"></i>
      </div>
      <h3>Pesan Terkirim! ðŸŽ‰</h3>
      <p>Pesan Anda telah berhasil dikirim ke Telegram Kizhoo. Pesan akan langsung muncul di chat Kizhoo.</p>
      
      <div class="modal-buttons">
        <button class="modal-btn primary" id="sendAnotherBtn">
          <i class="fas fa-plus"></i> Kirim Pesan Lain
        </button>
        <button class="modal-btn secondary" id="closeSuccessBtn">
          <i class="fas fa-times"></i> Tutup
        </button>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <div class="toast-icon">
      <i class="fas fa-check"></i>
    </div>
    <div class="toast-content">
      <div class="toast-title" id="toastTitle"></div>
      <div class="toast-message" id="toastMessage"></div>
    </div>
    <button class="toast-close" id="toastClose">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <!-- JavaScript -->
  <script>
    // ===== APP STATE =====
    let files = [];
    let isSending = false;
    let uploadProgress = 0;

    // ===== DOM ELEMENTS =====
    const senderNameInput = document.getElementById('senderName');
    const messageInput = document.getElementById('message');
    const charCount = document.getElementById('charCount');
    const photoInput = document.getElementById('photoInput');
    const uploadArea = document.getElementById('uploadArea');
    const previewContainer = document.getElementById('previewContainer');
    const previewGrid = document.getElementById('previewGrid');
    const clearAllBtn = document.getElementById('clearAllBtn');
    const sendBtn = document.getElementById('sendBtn');
    const errorDisplay = document.getElementById('errorDisplay');
    const errorMessage = document.getElementById('errorMessage');
    const errorSolution = document.getElementById('errorSolution');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const successModal = document.getElementById('successModal');
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const step4 = document.getElementById('step4');
    const sendAnotherBtn = document.getElementById('sendAnotherBtn');
    const closeSuccessBtn = document.getElementById('closeSuccessBtn');
    const toast = document.getElementById('toast');
    const toastTitle = document.getElementById('toastTitle');
    const toastMessage = document.getElementById('toastMessage');
    const toastClose = document.getElementById('toastClose');
    const privacyBtn = document.getElementById('privacyBtn');
    const howToBtn = document.getElementById('howToBtn');

    // ===== INITIALIZATION =====
    document.addEventListener('DOMContentLoaded', () => {
      initApp();
    });

    function initApp() {
      setupEventListeners();
      showToast('Selamat datang! Kirim pesan anonim ke Kizhoo', 'info', 3000);
      
      // Focus on sender name input
      setTimeout(() => {
        senderNameInput.focus();
      }, 500);
    }

    // ===== EVENT LISTENERS =====
    function setupEventListeners() {
      // Character count
      messageInput.addEventListener('input', updateCharCount);
      
      // Upload area events
      uploadArea.addEventListener('click', () => photoInput.click());
      uploadArea.addEventListener('dragover', handleDragOver);
      uploadArea.addEventListener('dragleave', handleDragLeave);
      uploadArea.addEventListener('drop', handleDrop);
      
      // File input
      photoInput.addEventListener('change', handleFileSelect);
      
      // Clear all files
      clearAllBtn.addEventListener('click', clearAllFiles);
      
      // Send button
      sendBtn.addEventListener('click', sendMessage);
      
      // Success modal buttons
      sendAnotherBtn.addEventListener('click', resetForm);
      closeSuccessBtn.addEventListener('click', () => {
        successModal.classList.remove('show');
      });
      
      // Toast close
      toastClose.addEventListener('click', hideToast);
      
      // Info buttons
      privacyBtn.addEventListener('click', showPrivacyInfo);
      howToBtn.addEventListener('click', showHowItWorks);
      
      // Keyboard shortcuts
      document.addEventListener('keydown', handleKeyboardShortcuts);
      
      // Auto-hide toast after 5 seconds
      toast.addEventListener('animationend', () => {
        if (toast.classList.contains('show')) {
          setTimeout(hideToast, 5000);
        }
      });
    }

    // ===== CHARACTER COUNT =====
    function updateCharCount() {
      const count = messageInput.value.length;
      charCount.textContent = `${count}/2000 karakter`;
      
      if (count > 1800) {
        charCount.classList.add('warning');
        charCount.classList.remove('error');
      } else if (count > 2000) {
        charCount.classList.add('error');
        charCount.classList.remove('warning');
      } else {
        charCount.classList.remove('warning', 'error');
      }
    }

    // ===== FILE HANDLING =====
    function handleDragOver(e) {
      e.preventDefault();
      e.stopPropagation();
      uploadArea.classList.add('drag-over');
    }

    function handleDragLeave(e) {
      e.preventDefault();
      e.stopPropagation();
      uploadArea.classList.remove('drag-over');
    }

    function handleDrop(e) {
      e.preventDefault();
      e.stopPropagation();
      uploadArea.classList.remove('drag-over');
      
      const droppedFiles = Array.from(e.dataTransfer.files);
      handleFiles(droppedFiles);
    }

    function handleFileSelect(e) {
      const selectedFiles = Array.from(e.target.files);
      handleFiles(selectedFiles);
    }

    function handleFiles(fileList) {
      const validFiles = fileList.filter(file => {
        const isValidType = file.type.startsWith('image/');
        const isValidSize = file.size <= 5 * 1024 * 1024; // 5MB
        return isValidType && isValidSize;
      });
      
      const invalidFiles = fileList.length - validFiles.length;
      if (invalidFiles > 0) {
        showToast(`${invalidFiles} file tidak valid (hanya gambar maksimal 5MB)`, 'warning');
      }
      
      // Limit to 5 files
      const filesToAdd = validFiles.slice(0, 5 - files.length);
      
      if (filesToAdd.length < validFiles.length) {
        showToast('Maksimal 5 gambar yang dapat diunggah', 'warning');
      }
      
      files.push(...filesToAdd);
      updatePreview();
      
      if (files.length > 0) {
        previewContainer.classList.add('show');
      } else {
        previewContainer.classList.remove('show');
      }
      
      // Update file input
      const dataTransfer = new DataTransfer();
      files.forEach(file => dataTransfer.items.add(file));
      photoInput.files = dataTransfer.files;
    }

    function updatePreview() {
      previewGrid.innerHTML = '';
      
      files.forEach((file, index) => {
        const reader = new FileReader();
        
        reader.onload = (e) => {
          const previewItem = document.createElement('div');
          previewItem.className = 'preview-item';
          
          const img = document.createElement('img');
          img.src = e.target.result;
          img.alt = `Gambar ${index + 1}`;
          img.loading = 'lazy';
          
          const removeBtn = document.createElement('div');
          removeBtn.className = 'remove';
          removeBtn.innerHTML = '<i class="fas fa-times"></i>';
          removeBtn.addEventListener('click', (event) => {
            event.stopPropagation();
            removeFile(index);
          });
          
          previewItem.appendChild(img);
          previewItem.appendChild(removeBtn);
          previewGrid.appendChild(previewItem);
        };
        
        reader.readAsDataURL(file);
      });
    }

    function removeFile(index) {
      files.splice(index, 1);
      updatePreview();
      
      if (files.length === 0) {
        previewContainer.classList.remove('show');
      }
      
      // Update file input
      const dataTransfer = new DataTransfer();
      files.forEach(file => dataTransfer.items.add(file));
      photoInput.files = dataTransfer.files;
    }

    function clearAllFiles() {
      files = [];
      photoInput.value = '';
      previewContainer.classList.remove('show');
      updatePreview();
    }

    // ===== MESSAGE SENDING =====
    async function sendMessage() {
      // Validation
      if (!validateForm()) return;
      
      if (isSending) return;
      
      // Confirmation
      if (!confirm('Kirim pesan ke Kizhoo? Pesan tidak dapat dibatalkan setelah dikirim.')) {
        return;
      }
      
      isSending = true;
      sendBtn.disabled = true;
      sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Mengirim...';
      hideError();
      
      // Show loading with steps
      resetLoadingSteps();
      loadingOverlay.classList.add('show');
      
      try {
        // Step 1: Validation
        updateLoadingStep(1);
        
        const senderName = senderNameInput.value.trim();
        const message = messageInput.value.trim();
        
        // Step 2: Prepare photos
        updateLoadingStep(2);
        const photos = [];
        
        if (files.length > 0) {
          for (let i = 0; i < files.length; i++) {
            const base64 = await fileToBase64(files[i]);
            photos.push(base64);
            
            // Update progress for each file
            const progress = 40 + (i / files.length) * 30;
            updateLoadingProgress(progress);
          }
        }
        
        // Step 3: Send to server
        updateLoadingStep(3);
        
        const response = await fetch('/api/send', {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json',
            'Accept': 'application/json'
          },
          body: JSON.stringify({ 
            senderName, 
            message, 
            photos 
          })
        });
        
        // Step 4: Complete
        updateLoadingStep(4);
        
        const data = await response.json();
        
        if (!response.ok) {
          throw new Error(data.error || `HTTP ${response.status}: ${response.statusText}`);
        }
        
        if (!data.success) {
          throw new Error(data.error || 'Gagal mengirim pesan');
        }
        
        // Success
        setTimeout(() => {
          loadingOverlay.classList.remove('show');
          successModal.classList.add('show');
          resetForm();
        }, 1000);
        
      } catch (error) {
        console.error('Send error:', error);
        loadingOverlay.classList.remove('show');
        
        let errorMsg = error.message;
        let solution = 'Coba lagi beberapa saat atau hubungi administrator.';
        
        // Custom error messages
        if (errorMsg.includes('NetworkError') || errorMsg.includes('Failed to fetch')) {
          errorMsg = 'Tidak dapat terhubung ke server';
          solution = 'Periksa koneksi internet Anda dan coba lagi.';
        } else if (errorMsg.includes('BOT_TOKEN') || errorMsg.includes('CHAT_ID')) {
          errorMsg = 'Konfigurasi bot Telegram belum diatur';
          solution = 'Hubungi administrator untuk mengatur bot Telegram.';
        } else if (errorMsg.includes('400')) {
          errorMsg = 'Data tidak valid';
          solution = 'Pastikan semua data diisi dengan benar.';
        } else if (errorMsg.includes('500')) {
          errorMsg = 'Server error';
          solution = 'Server sedang mengalami masalah. Coba lagi nanti.';
        }
        
        showError(errorMsg, solution);
        showToast('Gagal mengirim pesan', 'error');
      } finally {
        isSending = false;
        sendBtn.disabled = false;
        sendBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Kirim ke Kizhoo';
      }
    }

    function fileToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    function validateForm() {
      const senderName = senderNameInput.value.trim();
      const message = messageInput.value.trim();
      
      if (!senderName) {
        showError('Nama harus diisi', 'Masukkan nama atau samaran Anda.');
        senderNameInput.focus();
        return false;
      }
      
      if (senderName.length > 100) {
        showError('Nama terlalu panjang', 'Nama maksimal 100 karakter.');
        senderNameInput.focus();
        return false;
      }
      
      if (!message) {
        showError('Pesan harus diisi', 'Tulis pesan yang ingin disampaikan.');
        messageInput.focus();
        return false;
      }
      
      if (message.length > 2000) {
        showError('Pesan terlalu panjang', 'Pesan maksimal 2000 karakter.');
        messageInput.focus();
        return false;
      }
      
      return true;
    }

    // ===== LOADING PROGRESS =====
    function resetLoadingSteps() {
      [step1, step2, step3, step4].forEach(step => {
        step.classList.remove('active');
      });
    }

    function updateLoadingStep(stepNumber) {
      resetLoadingSteps();
      
      for (let i = 1; i <= stepNumber; i++) {
        const step = document.getElementById(`step${i}`);
        if (step) step.classList.add('active');
      }
    }

    function updateLoadingProgress(progress) {
      // Optional: Update progress bar if needed
    }

    // ===== ERROR HANDLING =====
    function showError(message, solution) {
      errorMessage.textContent = message;
      errorSolution.textContent = solution;
      errorDisplay.classList.add('show');
      
      // Scroll to error
      setTimeout(() => {
        errorDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }, 100);
    }

    function hideError() {
      errorDisplay.classList.remove('show');
    }

    // ===== TOAST NOTIFICATIONS =====
    function showToast(message, type = 'info', duration = 5000) {
      // Remove any existing classes
      toast.className = 'toast';
      
      // Set type
      toast.classList.add(type);
      
      // Set content
      const titles = {
        success: 'Berhasil!',
        error: 'Error!',
        warning: 'Perhatian!',
        info: 'Info'
      };
      
      toastTitle.textContent = titles[type] || 'Info';
      toastMessage.textContent = message;
      
      // Show toast
      toast.classList.add('show');
      
      // Auto-hide
      if (duration > 0) {
        setTimeout(hideToast, duration);
      }
    }

    function hideToast() {
      toast.classList.remove('show');
    }

    // ===== FORM RESET =====
    function resetForm() {
      senderNameInput.value = '';
      messageInput.value = '';
      clearAllFiles();
      updateCharCount();
      hideError();
      
      // Close modals
      loadingOverlay.classList.remove('show');
      successModal.classList.remove('show');
      
      // Focus back to name input
      senderNameInput.focus();
      
      showToast('Form telah direset. Kirim pesan baru!', 'info', 3000);
    }

    // ===== KEYBOARD SHORTCUTS =====
    function handleKeyboardShortcuts(e) {
      // Ctrl/Cmd + Enter to send
      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        e.preventDefault();
        sendMessage();
      }
      
      // Esc to close modals
      if (e.key === 'Escape') {
        if (loadingOverlay.classList.contains('show')) {
          // Don't allow closing loading overlay
          e.preventDefault();
        } else if (successModal.classList.contains('show')) {
          successModal.classList.remove('show');
        }
      }
    }

    // ===== INFO MODALS =====
    function showPrivacyInfo(e) {
      e.preventDefault();
      showToast(
        'Privasi: Nama dan pesan hanya dikirim ke Telegram Kizhoo. Tidak disimpan di server kami.',
        'info',
        6000
      );
    }

    function showHowItWorks(e) {
      e.preventDefault();
      showToast(
        'Cara kerja: Pesan dikirim via API Telegram langsung ke chat Kizhoo. Tidak ada perantara.',
        'info',
        6000
      );
    }

    // ===== SERVICE WORKER FOR PWA =====
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(err => {
          console.log('Service Worker registration failed:', err);
        });
      });
    }

    // ===== OFFLINE DETECTION =====
    window.addEventListener('online', () => {
      showToast('Koneksi internet tersedia', 'success', 2000);
    });

    window.addEventListener('offline', () => {
      showToast('Anda sedang offline', 'error', 3000);
    });
  </script>
</body>
</html>
